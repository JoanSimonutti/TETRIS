<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Define el tipo de documento HTML5 -->
    <meta charset="UTF-8" />

    <!-- Título que se mostrará en la pestaña del navegador -->
    <title>Tetris-Javascript</title>

    <!-- Enlace al archivo CSS externo para aplicar estilos visuales -->
    <link rel="stylesheet" href="style/style.css" />

    <!-- Inclusión de la librería p5.js desde CDN (usada para gráficos y animación) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  </head>

  <body>
    <!-- Navbar -->
    <header class="navbar">
      <p>
        <a href="https://github.com/joansimonutti/TETRIS" target="_blank"
          >TETRIS</a
        >
        |
        <button id="open-controls-modal" class="modal-button">
          Keyboard Controls
        </button>
        |
        <a href="https://github.com/joansimonutti" target="_blank">GitHub</a>
        |
        <a href="https://www.linkedin.com/in/joansimonutti" target="_blank"
          >LinkedIn</a
        >
        | Joan Simonutti
      </p>
    </header>

    <!-- Modal -->
    <div id="controls-modal" class="modal hidden">
      <div class="modal-content">
        <span class="modal-close" id="close-controls-modal">&times;</span>
        <h2>Controls</h2>
        <ul>
          <li>⬆️ or <strong>W</strong>: Rotate piece</li>
          <li>⬅️ or <strong>A</strong>: Move left</li>
          <li>➡️ or <strong>D</strong>: Move right</li>
          <li>⬇️ or <strong>S</strong>: Move down</li>
          <li><strong>Spacebar</strong>: Hard drop</li>
          <li><strong>P</strong>: Pause / Resume</li>
          <li><strong>N</strong>: Restart game</li>
        </ul>
      </div>
    </div>

    <!-- Carga del código JavaScript en módulos ES6 -->
    <!-- El orden importa si hay dependencias: main.js se debe cargar último -->

    <!-- Board: contiene la clase para el tablero del juego -->
    <script type="module" src="src/board.js"></script>

    <!-- Piece: contiene la clase que define el comportamiento de los tetriminos -->
    <script type="module" src="src/piece.js"></script>

    <!-- Main: el archivo que inicializa y ejecuta todo el juego -->
    <script type="module" src="src/main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const openBtn = document.getElementById("open-controls-modal");
        const closeBtn = document.getElementById("close-controls-modal");
        const modal = document.getElementById("controls-modal");

        openBtn.addEventListener("click", () => {
          modal.classList.remove("hidden");
        });

        closeBtn.addEventListener("click", () => {
          modal.classList.add("hidden");
        });

        window.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
          }
        });
      });
    </script>
  </body>
</html>

<!-- ¿Qué estás aprendiendo acá?
- Que los archivos type="module" permiten usar import y export, pero no comparten el contexto global como en scripts clásicos.
- Que el orden de los <script> no siempre importa con módulos si no hay ejecución inmediata, pero por buena práctica se pone main.js al final (porque es el punto de entrada).
- Que p5.js debe cargarse antes de cualquier script que use funciones como createCanvas, draw, setup, etc. -->
